name: Growth Curve (T0) - Workflow

metadata:
  author: Casey Stone, Abraham Stroka
  info: create_plate_T0 Workflow for BIO350 multi growth_app application
  version: 0.1

parameters: 
  - name: hso_1_path
  - name: hso_2_path
  - name: hso_3_path

steps:
  - name: Move plate from Stack1 to Solo.Position2
    node: platecrane_poly
    action: transfer
    args:
      plate_type: "flat_bottom_96well"
    locations: 
      source: "Stack1"
      target: "Solo.Position2"
    comment: Place plate in Solo Position2

  - name: Remove lid
    node: platecrane_poly
    action: remove_lid
    args:
      plate_type: "flat_bottom_96well"
    locations: 
      source: "Solo.Position2"
      target: "Stack4"
    comment: Place plate lid on lid nest 2

  - name: Move platecrane_poly to Safe location
    node: platecrane_poly
    action: move
    locations: 
      target: "Safe"
    comment: Move platecrane_poly out of the way of SOLO arm

    # STEP 1
  - name: Mix Reactions
    node: solo_sam
    action: run_protocol
    files:
      protocol_file: $hso_1_path
    comment: resource check not implemented, but will be

    # STEP 2
  - name: Mix Reactions
    node: solo_sam
    action: run_protocol
    files:
      protocol_file: $hso_2_path
    comment: resource check not implemented, but will be

    # STEP 3
  - name: Mix Reactions
    node: solo_sam
    action: run_protocol
    files:
      protocol_file: $hso_3_path
    comment: resource check not implemented, but will be

  - name: Open hidex_howard
    node: hidex_howard
    action: open
    comment: Open hidex_howard Gate

  - name: Move plate from Solo Position2 to hidex_howard Nest
    node: platecrane_poly
    action: transfer
    args:
      plate_type: "flat_bottom_96well"
      height_offset: 8
    locations: 
      source: "Solo.Position2"
      target: "Hidex.Nest"
    comment: Place plate to Hidex Nest

  - name: run hidex_howard
    node: hidex_howard
    action: run_assay
    args:
      assay_name: "Campaign2_wei_cs"
    data_labels:
      assay_result: T0_result
    comment: Run protocol at hidex_howard

  - name: Open hidex_howard     
    node: hidex_howard
    action: open
    comment: Open hidex_howard Gate

  - name: Move plate from Hidex.Nest to Sealer  # EDITED UNTIL HERE!
    node: platecrane_poly
    action: transfer
    args:
      source: "hidex_howard.Nest"
      target: "Sealer.Nest"
      plate_type: "flat_bottom_96well"
      height_offset: 8
    checks: null
    comment: Place plate to Sealer

  - name: Close hidex_howard
    node: hidex_howard
    action: close
    args:
      foo: "bar"
    checks: null
    comment: Close hidex_howard Gate

  - name: Seal plate
    node: sealer
    action: seal
    args:
      time: payload:seal.time
      temperature: 175
    checks: null
    comment: Seal the plate

  - name: Move plate from Sealer to Liconic
    node: platecrane_poly
    action: transfer
    args:
      source: "Sealer.Nest"
      target: "Liconic.Nest"
      plate_type: "flat_bottom_96well"
    checks: null
    comment: Place plate onto Liconic

  - name: Load Liconic
    node: liconic
    action: load_plate
    args:
      plate_id: payload.plate_id
      stacker: null
      slot: null
    checks: null
    comment: Load assay plate into Liconic

  # DO NOT SHAKE UNTIL THE SHAKER IS INSTALLED
  # - name: Start shaker at set speed
  #   node: liconic
  #   action: begin_shake
  #   args:
  #     shaker_speed: payload.shaker_speed
  #   checks: null
  #   comment: Shake the assay plate in Liconic
