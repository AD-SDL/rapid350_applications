name: Transfer deepwell to incubator - Workflow

metadata:
  author: Casey Stone
  info: Workflow to transfer 384 well plate to incubator
  version: 0.1

parameters:
  - name: tip_box_position
  - name: protocol_file
  - name: shaker_speed
  - name: seal_time
  - name: microplate_id   # id for the 384 well plate to be loaded into incubator

steps:
  # replace lid on 384 well plate
  - name: Replace lid    
    node: platecrane_poly
    action: replace_lid
    args:
      plate_type: "flat_bottom_96well"   # actually a 384 well plate but this def should be fine
    locations:
      source: "Solo.Position2"
      target: "LidNest1"
    comment: Place plate lid on lid nest 2

  # transfer 384 well plate to incubator
  - name: Transfer deepwell to liconic
    node: platecrane_poly
    action: transfer
    args:
      plate_type: "flat_bottom_96well"  # again, this should be fine for 384 well plate
      height_offset: 8   
    locations:
      source: "Solo.Position2"
      target: "Liconic.Nest"
    comment: Place 384 well plate on incubator nest

  # load incubator. (TODO: HOW TO LOAD MICROPLATES?? - I suppose they could be loaded to either side of the incubator)
  - name: Load Liconic   
    node: liconic_lisa
    action: load_plate
    args:
      plate_id: $microplate_id
    comment: Load assay plate into Liconic

  - name: Start shaker at set speed  # Q: Does shaking speed need to be different for deepwell plates
    node: liconic_lisa
    action: begin_shake
    args:
      shaker_speed: $shaker_speed
    comment: Stage pcr plates
 